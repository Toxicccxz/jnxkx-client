<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on 2016年 八月 31日 星期三, 下午 4:26 -->
<!-- MuClient version 4.94 -->

<!-- Plugin "jnxkx_mapper" generated by Plugin Wizard -->

<muclient>
<plugin
   name="jnxkx_mapper"
   author="醉轻侯"
   id="edcf4aa888923fc857b50bd8"
   language="Lua"
   purpose="江南侠客行GPS"
   date_written="2016-08-31 16:24:24"
   requires="4.94"
   version="1.0"
   >
<description trim="y">
<![CDATA[
暂时没有
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="mapper"
   match="^(&gt; )*([^&gt;;:+-.,]{1,16}) \- $"
   regexp="y"
   script="setRoomShortName"
   sequence="100"
  >
  </trigger>
    <trigger
   enabled="y"
   group="mapper"
   match="^(> )*    这里.*的出口是(.*)$"
   regexp="y"
   script="setRoomExits"
   sequence="100"
  >
  </trigger>
      <trigger
   enabled="y"
   group="mapper"
   match="^(> )*【(.*)地图】"
   regexp="y"
   script="setArea"
   sequence="100"
  >
  </trigger>
</triggers>

<!--  Script  -->


<script>
<![CDATA[
require "wait"

local currentArea = null
local currentRoom = {}

function setArea(name, line, wildcards)
    currentRoom.area = wildcards[2]

    Note(currentRoom.area..' '..currentRoom.shortName..' '..currentRoom.exits)
end

function setRoomShortName(name, line, wildcards)
    currentRoom.shortName = wildcards[2]
end

function setRoomExits(name, line, wildcards)
    currentRoom.exits = wildcards[2]
end



]]>
</script>


<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="jnxkx_mapper:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end
]]>
</script> 

</muclient>
